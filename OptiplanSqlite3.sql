-- MySQL Script generated by MySQL Workbench and modified to comply with SQLite3

-- -----------------------------------------------------
-- Table `Category`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Category` ;

CREATE TABLE IF NOT EXISTS `Category` (
  `Id` INT PRIMARY KEY,
  `Name` VARCHAR(100) NOT NULL
);


-- -----------------------------------------------------
-- Table `Dependency`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Dependency` ;

CREATE TABLE IF NOT EXISTS `Dependency` (
  `Id` INT PRIMARY KEY,
  `Name` VARCHAR(100) NOT NULL,
  `Tooltip` VARCHAR(500) NULL,
  `CategoryId` INT NOT NULL,
  `MultipleInstances` TINYINT NOT NULL DEFAULT 0,
  `TextAttributeLabel` VARCHAR(100) NULL,
  `IntegerAttributeLabel` VARCHAR(100) NULL,
  `NumberAttributeLabel` VARCHAR(100) NULL,
  `BooleanAttributeLabel` VARCHAR(100) NULL,
  CONSTRAINT `fk_Dependency_Category1`
    FOREIGN KEY (`CategoryId`)
    REFERENCES `Category` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);
CREATE INDEX `fk_Dependency_Category1_idx` ON `Dependency` (`CategoryId` ASC);


-- -----------------------------------------------------
-- Table `WorkOrder`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `WorkOrder` ;

CREATE TABLE IF NOT EXISTS `WorkOrder` (
  `Id` INT PRIMARY KEY,
  `Name` VARCHAR(100) NOT NULL,
  `StartDateTime` DATETIME NULL,
  `StopDateTime` DATETIME NULL
);

-- -----------------------------------------------------
-- Table `WorkOrderToDependency`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `WorkOrderToDependency` ;

CREATE TABLE IF NOT EXISTS `WorkOrderToDependency` (
  `DependencyInstanceId` INT NOT NULL,
  `DependencyId` INT NOT NULL,
  `WorkOrderId` INT NOT NULL,
  `TextAttributeValue` VARCHAR(500) NULL,
  `IntegerAttributeValue` INT NULL,
  `NumberAttributeValue` DOUBLE NULL,
  `BooleanAttributeValue` TINYINT NULL,
  `StartDateTime` DATETIME NULL,
  `StopDateTime` DATETIME NULL,
  PRIMARY KEY (`DependencyInstanceId`, `DependencyId`, `WorkOrderId`),
  CONSTRAINT `fk_WorkOrderToDependency_Dependency`
    FOREIGN KEY (`DependencyId`)
    REFERENCES `Dependency` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_WorkOrderToDependency_WorkOrder1`
    FOREIGN KEY (`WorkOrderId`)
    REFERENCES `WorkOrder` (`Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);
CREATE INDEX `fk_WorkOrderToDependency_Dependency_idx` ON `WorkOrderToDependency` (`DependencyId` ASC);
CREATE INDEX `fk_WorkOrderToDependency_WorkOrder1_idx` ON `WorkOrderToDependency` (`WorkOrderId` ASC);

-- -----------------------------------------------------
-- INSERT INTO Table `Category`
-- -----------------------------------------------------
INSERT INTO Category (Id, Name) VALUES
(1, 'Physical Environment'),
(2, 'Safety and Risk Management'),
(3, 'Planning'),
(4, 'Economy'),
(5, 'Human Resources'),
(6, 'Access and Logistics'),
(7, 'Materials and Equipment');

-- -----------------------------------------------------
-- INSERT INTO Table `Dependency`
-- -----------------------------------------------------
INSERT INTO Dependency (
    Id, Name, Tooltip, CategoryId, MultipleInstances, TextAttributeLabel, IntegerAttributeLabel, 
    NumberAttributeLabel, BooleanAttributeLabel
) VALUES
(
    1, 'Other work orders', 
    'Specify other work orders this work order depends on, and whether those work orders must have started or finished before this work order can start.',
    3, 1, 'Work order', NULL, NULL, 'Has finished'
),
(
    2, 'work order Start (Earliest)', 'The earliest date and time the work order can begin.',
    3, 0, NULL, NULL, NULL, NULL
),
(
    3, 'work order Start (Latest)', 'The latest date and time the work order can begin.',
    3, 0, NULL, NULL, NULL, NULL
),
(
    4, 'work order Deadline', 'The latest date and time the work order must be concluded.',
    3, 0, NULL, NULL, NULL, NULL
),
(
    5, 'Specialists', 'Specify the specialists to assign to this work order, and whether they are internally employed or externally hired.',
    5, 1, 'Role', 'Amount', NULL, 'External'
),
(
    6, 'Materials and Parts', 'Materials and (spare) parts that will be consumed during the work order.',
    7, 1, 'Material or part', NULL, 'Amount', 'In storage'
),
(
    7, 'Locations', 'The locations where the work order will be carried out.',
    6, 1, 'Location', NULL, NULL, NULL
),
(
    8, 'Locations to Close off', 'The locations where the work order will be carried out.',
    6, 1, 'Location', NULL, NULL, NULL
),
(
    9, 'Criticality', 'Criticality level on a scale of 1-5, where 1 is low and 5 is uttermost.',
    3, 0, NULL, 'Criticality', NULL, NULL
),
(
    10, 'Security Risks', 'The locations where the work order will be carried out.',
    2, 1, 'Description', 'Severity', NULL, NULL 
),
(
    11, 'Calculatory Costs', 'Estimated costs per day if work order is not carried out.',
    4, 0, NULL, NULL, 'Estimated calculatory costs', NULL
);

-- -----------------------------------------------------
-- INSERT INTO Table `WorkOrder`
-- -----------------------------------------------------

INSERT INTO WorkOrder (Id, Name, StartDateTime, StopDateTime) VALUES
(1, 'Lubrication of rolling mill bearings', '2026-01-05 08:00:00', '2026-01-05 16:00:00'),
(2, 'Replacement of blast furnace cooling pipes', '2026-01-06 07:00:00', '2026-01-10 18:00:00'),
(3, 'Inspection of overhead crane rails', '2026-01-05 18:00:00', '2026-01-06 02:00:00'),
(4, 'Calibration of temperature sensors in annealing line', '2026-01-07 09:00:00', '2026-01-07 15:00:00'),
(5, 'Cleaning and descaling of water treatment filters', '2026-01-08 08:00:00', '2026-01-08 20:00:00'),
(6, 'Repair of conveyor belt drive motor', '2026-01-09 06:00:00', '2026-01-09 14:00:00'),
(7, 'Replacement of damaged ladle refractory lining', '2026-01-10 07:00:00', '2026-01-14 19:00:00'),
(8, 'Preventive maintenance on air compressors', '2026-01-11 08:00:00', '2026-01-11 18:00:00'),
(9, 'Alignment check for continuous casting rollers', '2026-01-12 07:00:00', '2026-01-12 17:00:00'),
(10, 'Inspection and testing of emergency shutdown systems', '2026-01-13 08:00:00', '2026-01-13 16:00:00');
